/* Pixel Art Theme for LilGuy Dashboard */

:root {
  /* Color Palette */
  --pixel-teal: #5ebdb2;
  --pixel-teal-dark: #4a9d93;
  --pixel-teal-light: #7fd4ca;
  --pixel-green: #7cc47f;
  --pixel-green-dark: #5eaa61;
  --pixel-green-light: #9edd9f;
  --pixel-beige: #e8dab2;
  --pixel-beige-dark: #d6c89c;
  --pixel-beige-light: #f5ecd4;
  --pixel-blue: #68b0d8;
  --pixel-blue-dark: #4a99c7;
  --pixel-blue-light: #8bc5e4;
  --pixel-pink: #f5b0bd;
  --pixel-pink-dark: #e8899b;
  --pixel-pink-light: #fccbd5;
  
  /* UI Element Colors */
  --window-bg: white;
  --window-header-bg: var(--pixel-teal);
  --window-header-text: white;
  --window-border: black;
  --window-shadow: rgba(0, 0, 0, 0.3);
  
  /* Button Colors */
  --button-primary-bg: var(--pixel-blue);
  --button-primary-hover: var(--pixel-blue-light);
  --button-primary-active: var(--pixel-blue-dark);
  --button-secondary-bg: var(--pixel-beige);
  --button-secondary-hover: var(--pixel-beige-light);
  --button-secondary-active: var(--pixel-beige-dark);
  --button-danger-bg: #ff6b6b;
  --button-success-bg: var(--pixel-green);
  --button-green-bg: var(--pixel-green);
  --button-beige-bg: var(--pixel-beige);
  --button-pink-bg: var(--pixel-pink);
  --button-contrast-bg: #222;
  --button-contrast-text: #fff;
  
  /* Progress Bar Colors */
  --progress-bg: #f9f9f9;
  --progress-fill-good: var(--pixel-green);
  --progress-fill-medium: #f5d76e;
  --progress-fill-bad: #ff6b6b;
  
  /* Text Colors */
  --text-primary: black;
  --text-secondary: #555555;
  --text-light: #888888;
}

/* Pixel Window Styling */
.pixel-window {
  border: 2px solid black;
  background-color: var(--window-bg);
  position: relative;
  image-rendering: pixelated;
  box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.2);
  overflow: hidden;
}

.pixel-window-header {
  background-color: var(--window-header-bg);
  color: var(--window-header-text);
  padding: 0.5rem;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 2px solid black;
  font-family: 'Pixelify Sans', monospace;
  font-size: 1rem;
  height: 2.2rem;
}

.pixel-window-controls {
  display: flex;
  gap: 4px;
}

.pixel-window-button {
  width: 16px;
  height: 16px;
  border: 1px solid black;
  background-color: #d9d9d9;
}

.pixel-window-button:hover {
  background-color: #ffffff;
}

.pixel-window-content {
  padding: 1rem;
  background-color: white;
}

/* --- Productivity Metrics: Hide pixel window buttons on tablet only --- */
@media (min-width: 600px) and (max-width: 1024px) {
  .pixel-window-controls-metrics {
    display: none !important;
  }
}

@media (max-width: 599px), (min-width: 1025px) {
  .pixel-window-controls-metrics {
    display: flex;
  }
  .pixel-window-controls-metrics .pixel-window-button {
    pointer-events: auto;
    opacity: 1;
    filter: none;
    cursor: pointer;
  }
}

/* Pixel Buttons */
.pixel-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 0.8rem;
  background-color: var(--button-primary-bg);
  color: black;
  border: 2px solid black;
  text-transform: uppercase;
  font-family: 'Pixelify Sans', monospace;
  font-size: 0.85rem;
  cursor: pointer;
  box-shadow: 2px 2px 0 black;
  transition: all 0.1s;
  white-space: nowrap;
  flex-shrink: 0;
  image-rendering: pixelated;
}

.pixel-button.green {
  background-color: var(--button-green-bg);
  color: black;
}

.pixel-button.beige {
  background-color: var(--button-beige-bg);
  color: black;
}

.pixel-button.pink {
  background-color: var(--button-pink-bg);
  color: black;
}

.pixel-button.contrast {
  background-color: var(--button-contrast-bg);
  color: var(--button-contrast-text);
}

.pixel-button:hover {
  transform: translate(-1px, -1px);
  box-shadow: 3px 3px 0 black;
}

.pixel-button:active {
  transform: translate(1px, 1px);
  box-shadow: 1px 1px 0 black;
}

.pixel-button svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.pixel-button-sm {
  padding: 0.3rem 0.6rem;
  font-size: 0.75rem;
}

.pixel-button-primary {
  background-color: var(--button-primary-bg);
}

.pixel-button-secondary {
  background-color: var(--button-secondary-bg);
}

.pixel-button-success {
  background-color: var(--button-success-bg);
}

.pixel-button-danger {
  background-color: var(--button-danger-bg);
}

.pixel-button.teal {
  /* deprecated */
}

/* slider component */
.slider-thumb {
  position: relative;
  z-index: 10;
  background: white;
  border: 2px solid black;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: block;
}

.slider-track {
  position: relative;
  height: 8px;
  width: 100%;
  background-color: #e5e5e5;
  border: 1px solid black;
  overflow: hidden;
}

.slider-range {
  position: absolute;
  height: 100%;
  background-color: var(--pixel-green);
}

/* Pixel Progress Bars */
.pixel-progress {
  height: 16px;
  width: 100%;
  background-color: var(--progress-bg);
  border: 2px solid black;
  position: relative;
  overflow: hidden;
}

.pixel-progress-fill {
  height: 100%;
  position: absolute;
  left: 0;
  top: 0;
  background-color: var(--progress-fill-good);
  transition: width 0.3s;
}

/* Simple bordered container - for non-pixel UI components */
.simple-container {
  border: 1px solid #000;
  background-color: white;
}

.simple-container-header {
  border-bottom: 1px solid #000;
  padding: 1rem;
}

.simple-container-content {
  padding: 1rem;
}

/* Pixel Input Fields */
.pixel-input {
  border: 2px solid black;
  padding: 0.5rem;
  width: 100%;
  background-color: white;
  font-family: 'Pixelify Sans', monospace;
  font-size: 0.7rem;
  box-shadow: inset 2px 2px 0 rgba(0, 0, 0, 0.1);
}

.pixel-input:focus {
  outline: none;
  border-color: var(--pixel-blue);
}

/* Dialog Box */
.pixel-dialog {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: white;
  border: 2px solid black;
  box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.2);
  max-width: 90%;
  width: 400px;
  z-index: 1000;
}

.pixel-dialog-header {
  background-color: var(--pixel-pink);
  color: black;
  padding: 0.5rem;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 2px solid black;
  font-family: 'Pixelify Sans', monospace;
  font-size: 0.8rem;
}

.pixel-dialog-content {
  padding: 1rem;
  text-align: center;
  font-family: 'Pixelify Sans', monospace;
  font-size: 0.7rem;
  line-height: 1.5;
}

.pixel-dialog-buttons {
  display: flex;
  gap: 0.5rem;
  justify-content: center;
  padding: 1rem;
}

/* Pixel Icons */
.pixel-icon {
  width: 24px;
  height: 24px;
  image-rendering: pixelated;
}

/* Notification System */
.pixel-notification {
  position: fixed;
  bottom: 20px;
  right: 20px;
  max-width: 300px;
  z-index: 1000;
}

/* Forest Background */
.forest-background {
  background-image: url('/backgrounds/forest.png');
  background-size: cover;
  background-position: center;
  image-rendering: pixelated;
}

.pond-background {
  background-image: url('/backgrounds/pond.png');
  background-size: cover;
  background-position: center;
  image-rendering: pixelated;
}

/* Tabs Styling */
.pixel-tabs-list {
  display: flex;
  border-bottom: 2px solid black;
  margin-bottom: 1rem;
}

.pixel-tab {
  padding: 0.5rem 1rem;
  background-color: var(--pixel-beige);
  border: 2px solid black;
  border-bottom: none;
  margin-right: 0.25rem;
  font-family: 'Pixelify Sans', monospace;
  font-size: 0.7rem;
  cursor: pointer;
  position: relative;
  bottom: -2px;
}

.pixel-tab[data-state="active"] {
  background-color: white;
  border-bottom-color: white;
}

/* Segmented Pixel Progress Bar */
.segmented-progress {
  display: flex;
  width: 100%;
  height: 12px;
  gap: 2px;
}

.segment {
  flex: 1;
  background-color: #e1e1e1;
  border: 1px solid black;
}

.segment.filled {
  background-color: var(--progress-fill-good);
}

/* SiteList Responsive Customizations */

/* Make website input wider and dropdown narrower on tablets */
@media (min-width: 600px) and (max-width: 1024px) {
  .site-input {
    min-width: 260px;
    max-width: 400px;
    width: 100%;
  }
  .site-goal-select,
  .site-category-select {
    min-width: 110px;
    max-width: 140px;
    width: 100%;
  }
}

/* On mobile, keep input and dropdowns full width */
@media (max-width: 599px) {
  .site-input,
  .site-goal-select,
  .site-category-select {
    width: 100%;
    min-width: 0;
    max-width: 100%;
  }
}

/* On desktop, default to normal sizing */
@media (min-width: 1025px) {
  .site-input {
    min-width: 380px;
    max-width: 540px;
    width: 100%;
  }
  .site-category-select {
    min-width: 0;
    width: auto;
    max-width: 140px;
    background: white !important;
    border: 1.5px solid #222 !important;
    box-shadow: 2px 2px 0 #222;
    padding-left: 12px;
    padding-right: 28px;
  }
  .site-goal-select {
    min-width: 0;
    width: auto;
    max-width: 180px;
  }
}

.site-category-select {
  background: white !important;
  border: 1.5px solid #222 !important;
  box-shadow: 2px 2px 0 #222;
  padding-left: 12px;
  padding-right: 28px;
  width: auto;
  min-width: 0;
  max-width: 140px;
}

/* Ensure content never exceeds viewport width on mobile */
@media (max-width: 640px) {
  .site-input,
  .site-category-select,
  .site-goal-select {
    max-width: 100%;
    width: 100%;
    box-sizing: border-box;
  }
  
  /* Prevent horizontal scrolling on container */
  div[class*="w-full border-2 border-black bg-white shadow"] {
    max-width: 100vw;
    overflow-x: hidden;
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }
  
  /* Ensure items inside SimpleItem don't overflow */
  div[class*="p-3 border-2 border-black"] {
    padding: 0.75rem;
    width: 100%;
    box-sizing: border-box;
    overflow-x: hidden;
  }
  
  /* Fix select dropdowns */
  [class*="SelectTrigger"] {
    max-width: 100%;
    width: auto !important;
  }
  
  /* Ensure buttons don't cause overflow */
  button {
    white-space: nowrap;
  }
}

/* Fix for mobile website items */
@media (max-width: 640px) {
  /* Ensure website items stack properly */
  [id^="website-"] > div {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  /* Make dropdowns and buttons take full width */
  [id^="website-"] .site-category-select,
  [id^="website-"] .site-goal-select {
    width: 100%;
    max-width: 100%;
  }
  
  /* Add space between stacked elements */
  [id^="website-"] > div > div:last-child {
    margin-top: 0.5rem;
    width: 100%;
  }
}

/* Fix for tablet view (600px-1024px) */
@media (min-width: 641px) and (max-width: 1024px) {
  /* Prevent container from expanding beyond viewport */
  div[class*="w-full border-2 border-black bg-white shadow"] {
    max-width: calc(100vw - 2rem);
    overflow-x: hidden;
    box-sizing: border-box;
  }
  
  /* Ensure website items don't cause overflow */
  [id^="website-"] {
    max-width: 100%;
    overflow-x: hidden;
  }
  
  /* Limit width of website items content */
  [id^="website-"] > div {
    flex-wrap: wrap;
    max-width: 100%;
  }
  
  /* Ensure dropdowns don't expand beyond container */
  [id^="website-"] .site-category-select,
  [id^="website-"] .site-goal-select {
    max-width: 140px;
    width: auto;
  }
  
  /* Fix select content positioning */
  [class*="SelectContent"] {
    max-width: calc(100vw - 3rem);
    width: auto;
  }
}

/* Fix for all screen sizes to prevent overflow */
[class*="SelectContent"] {
  max-width: calc(100vw - 2rem);
  width: auto !important;
}

/* Ensure website items never cause overflow */
[id^="website-"] {
  overflow-x: hidden;
  max-width: 100%;
}

/* Fix pixel window width consistency across tabs */
.pixel-window,
div[class*="w-full border-2 border-black bg-white shadow"] {
  width: 100%;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  box-sizing: border-box;
}

/* Ensure content inside the window stays within bounds */
.pixel-window-content,
div[class*="w-full border-2 border-black bg-white shadow"] > div {
  width: 100%;
  overflow-x: hidden;
  box-sizing: border-box;
}

/* Ensure website items fit within container */
[id^="website-"] {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
  box-sizing: border-box;
}

/* Fix select content positioning */
[class*="SelectContent"] {
  max-width: min(300px, calc(100vw - 2rem));
  width: auto !important;
}

/* Mobile-specific adjustments for dashboard components */
@media (max-width: 640px) {
  /* Remove padding from the Goals container on mobile */
  div[class*="p-4"] > div[class*="bg-blue-100"],
  div[class*="p-4"] > div[class*="bg-green-100"],
  div[class*="p-4"] > div[class*="bg-yellow-100"] {
    margin: -1rem !important;
    width: calc(100% + 2rem) !important;
    border-radius: 0 !important;
  }
  
  /* Remove padding from SimpleContainer content on mobile */
  div[class*="w-full border-2 border-black bg-white shadow"] + div > div > div[class*="p-4"] > div[class*="flex gap-2 mb-6"] {
    padding: 0.5rem !important;
  }
  
  /* Remove padding from productivity graph container on mobile, but keep padding for the metrics boxes */
  .recharts-responsive-container {
    padding: 0 !important;
  }
  
  /* Keep padding for the productivity metrics boxes */
  .pixel-window-content {
    padding: 1rem !important;
  }
  
  /* Remove padding around dashboard tab content on mobile */
  div[class*="w-full border-2 border-black bg-white shadow"] + div > div > div[class*="p-4"] {
    padding: 0 !important;
  }
  
  /* Ensure charts and graphs fit within mobile viewport */
  .recharts-responsive-container {
    width: 100% !important;
    max-width: 100vw !important;
    margin-left: -8px;
  }
  
  /* Make the notification for no websites attributed flex on mobile */
  div[class*="text-center py-4 text-pixel-warning bg-yellow-50"] {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    text-align: center !important;
  }
  
  /* Add spacing between text and button */
  div[class*="text-center py-4 text-pixel-warning bg-yellow-50"] button {
    margin-top: 0.75rem !important;
  }
}

/* Mobile-specific adjustments for goals and site list */
@media (max-width: 640px) {
  /* Make edit and delete buttons in goals share one line but appear below goal text */
  div[class*="flex items-center justify-between gap-2 mb-2"] {
    flex-direction: column;
    align-items: flex-start;
  }
  
  /* Keep edit and delete buttons on the same line but move them below */
  div[class*="flex-shrink-0 flex items-center gap-1"] {
    width: 100%;
    justify-content: flex-start;
    margin-top: 0.5rem;
  }
  
  /* Make site list filters wrap on mobile */
  div[class*="flex gap-2 mt-1"] {
    flex-wrap: wrap;
  }
  
  /* Ensure filter buttons have proper spacing */
  div[class*="flex gap-2 mt-1"] button {
    margin-bottom: 0.5rem;
  }
  
  /* Make "No websites attributed" message stack vertically on mobile */
  div[class*="text-xs text-pixel-warning bg-yellow-50 border border-yellow-200 rounded"] {
    flex-direction: column !important;
    align-items: center !important;
    text-align: center !important;
    gap: 0.75rem !important;
  }
  
  /* Remove margin from button in the message */
  div[class*="text-xs text-pixel-warning bg-yellow-50 border border-yellow-200 rounded"] button {
    margin-left: 0 !important;
  }
}

/* Fix for notifications popup overflow on mobile and tablet */
@media (max-width: 1024px) {
  /* Target the notifications dropdown content */
  [class*="pixel-window w-80 z-50"] {
    width: calc(100vw - 32px) !important;
    max-width: 320px !important;
    right: 0 !important;
    left: auto !important;
    position: fixed !important;
  }
  
  /* Ensure dropdown content stays within viewport */
  [data-radix-popper-content-wrapper] {
    max-width: calc(100vw - 16px) !important;
    transform: none !important;
    right: 8px !important;
    left: auto !important;
  }
  
  /* Ensure the dropdown content is properly positioned */
  div[class*="pixel-window-content"] {
    max-height: 80vh;
    overflow-y: auto;
  }
}

/* Additional fixes for very small screens */
@media (max-width: 480px) {
  [class*="pixel-window w-80 z-50"] {
    max-width: calc(100vw - 32px) !important;
  }
}
